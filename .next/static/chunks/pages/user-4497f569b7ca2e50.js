(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[921],{6238:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/user",function(){return t(6875)}])},6875:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var s=t(7876),i=t(4232),l=t(9917),n=t(2964),r=t(8600),d=t(9099);function c(){let[e,a]=(0,i.useState)(null),[t,c]=(0,i.useState)(null),[u,m]=(0,i.useState)("..."),[o,x]=(0,i.useState)([]),h=(0,d.useRouter)();(0,i.useEffect)(()=>{let e=(0,l.xI)().currentUser;a(e),(async()=>{if(!e)return;let a=(0,n.H9)(r.db,"users",e.uid),t=await (0,n.x7)(a);if(t.exists()){var s;c(null!=(s=t.data().recipeCredits)?s:0);let e=t.data().createdAt;e instanceof n.Dc&&m(e.toDate().toLocaleDateString())}let i=(0,n.P)((0,n.rJ)(r.db,"likedRecipes"),(0,n._M)("userId","==",e.uid));x((await (0,n.GG)(i)).docs.map(e=>({id:e.id,...e.data()})))})()},[]);let _=async()=>{if(confirm("Bu işlem geri alınamaz. Hesabınızı ve tariflerinizi silmek istediğinize emin misiniz?")&&e)try{let a=(0,n.P)((0,n.rJ)(r.db,"likedRecipes"),(0,n._M)("userId","==",e.uid)),t=(await (0,n.GG)(a)).docs.map(e=>(0,n.kd)(e.ref));await Promise.all(t),await (0,n.kd)((0,n.H9)(r.db,"users",e.uid)),await (0,l.CI)((0,l.xI)()),h.push("/landing")}catch(e){alert("Hesap silinirken bir hata oluştu."),console.error(e)}};return e?(0,s.jsxs)("div",{className:"min-h-screen bg-white text-gray-800 flex flex-col items-center justify-start pt-16 px-4 font-sans",children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold mb-4",children:["\uD83D\uDC64 ",e.displayName||"Kullanıcı"]}),(0,s.jsxs)("div",{className:"bg-gray-50 border p-6 rounded-xl shadow-md w-full max-w-md text-center",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:e.email}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["\xdcyelik Tarihi: ",u]}),(0,s.jsxs)("div",{className:"bg-green-100 text-green-800 font-medium py-2 px-4 rounded-full inline-block shadow",children:["Kalan Tarif Hakkınız: ",null!=t?t:"..."," / 5"]})]}),(0,s.jsxs)("div",{className:"w-full max-w-md mt-8",children:[(0,s.jsx)("h2",{className:"text-lg font-bold mb-2",children:"\uD83D\uDCDA Tarifleriniz"}),0===o.length?(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Hen\xfcz tarif beğenmediniz."}):(0,s.jsx)("ul",{className:"space-y-2",children:o.map(e=>(0,s.jsx)("li",{className:"bg-gray-100 p-3 rounded shadow",children:(0,s.jsx)("a",{href:"/recipePage/".concat(e.id),className:"text-green-700 hover:underline font-semibold",children:e.title})},e.id))})]}),(0,s.jsxs)("div",{className:"mt-10 flex flex-col items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>h.back(),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold px-6 py-2 rounded-full shadow-md transition duration-300",children:"← Geri D\xf6n"}),(0,s.jsx)("button",{onClick:_,className:"bg-red-600 hover:bg-red-700 text-white font-semibold px-6 py-2 rounded-full shadow-md transition duration-300",children:"\uD83D\uDEAB Bilgilerimi Sil"})]})]}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-gray-600",children:"Kullanıcı bilgisi alınamadı. Giriş yapın."})})}},8600:(e,a,t)=>{"use strict";t.d(a,{Mn:()=>x,db:()=>u,j2:()=>o,lU:()=>m,yA:()=>c});var s=t(6042),i=t(9591),l=t(9917),n=t(2964),r=t(5364);let d={apiKey:r.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:r.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:r.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:r.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:r.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:r.env.NEXT_PUBLIC_FIREBASE_APP_ID,measurementId:r.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID},c=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)(d);(0,i.TT)().then(e=>{e&&(0,i.P5)(c)});let u=(0,n.aU)(c),m=async e=>{let a=(0,n.H9)(u,"users",e);await (0,n.mZ)(a,{recipeCredits:(0,n.GV)(-1)})},o=(0,l.xI)(c),x=new l.HF},9099:(e,a,t)=>{e.exports=t(4294)}},e=>{var a=a=>e(e.s=a);e.O(0,[671,329,205,636,593,792],()=>a(6238)),_N_E=e.O()}]);