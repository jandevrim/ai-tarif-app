"use strict";(()=>{var e={};e.id=105,e.ids=[105],e.modules={215:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>n,default:()=>s});var i=a(2210),o=e([i]);i=(o.then?(await o)():o)[0];let n={api:{bodyParser:!1}};async function s(e,t){if(console.log("\uD83D\uDE80 [API] /api/generate-images         \xe7aÄŸrÄ±ldÄ±"),"GET"!==e.method)return console.log("âŒ YalnÄ±zca GET isteÄŸi destekleniyor"),t.status(405).json({error:"Method not allowed"});try{console.log("â³ G\xf6rseller \xfcretilmeye baÅŸlanÄ±yor..."),await (0,i.A)(),console.log("âœ… G\xf6rseller baÅŸarÄ±yla iÅŸlendi."),t.status(200).json({message:"G\xf6rseller baÅŸarÄ±yla iÅŸlendi."})}catch(e){console.error("\uD83D\uDD25 HATA:",e.message||e),t.status(500).json({error:e.message||"Bilinmeyen hata"})}}r()}catch(e){r(e)}})},1592:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>d,default:()=>c,routeModule:()=>g});var i=a(3480),o=a(8667),s=a(6435),n=a(215),l=e([n]);n=(l.then?(await l)():l)[0];let c=(0,s.M)(n,"default"),d=(0,s.M)(n,"config"),g=new i.PagesAPIRouteModule({definition:{kind:o.A.PAGES_API,page:"/api/generate-images",pathname:"/api/generate-images",bundlePath:"",filename:""},userland:n});r()}catch(e){r(e)}})},2210:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{A:()=>g});var i=a(7984),o=a(6551),s=a(4337),n=a(2537),l=e([i,o,s,n]);[i,o,s,n]=l.then?(await l)():l;let p={apiKey:process.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:process.env.NEXT_PUBLIC_FIREBASE_APP_ID},u=0===(0,o.getApps)().length?(0,o.initializeApp)(p):(0,o.getApp)(),f=(0,s.getFirestore)(u),m=(0,n.getStorage)(u),A=new i.default({apiKey:process.env.XAI_API_KEY,baseURL:"https://api.x.ai/v1"});async function c(e,t){let a=`Minimalist top-down line drawing of a healthy Turkish dish named "${e}". Ingredients include: ${t}. Use soft green and beige colors. Instagram look. Optimize for fast generation. Make sure that it fits the description of the food.`;return(await A.images.generate({model:"grok-2-image",prompt:a,n:1,response_format:"url"})).data[0].url}async function d(){let e=await (0,s.getDocs)((0,s.collection)(f,"likedRecipes")),t=e.docs.filter(e=>!e.data().imageUrl);if(console.log(`ðŸ§¾ Tarif sayÄ±sÄ±: ${e.docs.length}`),console.log(`ðŸ”Ž Eksik g\xf6rselli tarif: ${t.length}`),0===t.length)return void console.log("âœ… T\xfcm tariflerde g\xf6rsel mevcut.");let a={id:t[0].id,...t[0].data()};console.log("\uD83C\uDFAF Ä°ÅŸlenecek tarif:",a.title);let r=await c(a.title,a.ingredientList),i=await fetch(r),o=Buffer.from(await i.arrayBuffer()),l=`recipe_images/${a.id}.jpg`,d=(0,n.ref)(m,l);await (0,n.uploadBytes)(d,o,{contentType:"image/jpeg"});let g=await (0,n.getDownloadURL)(d);await (0,s.updateDoc)((0,s.doc)(f,"likedRecipes",a.id),{imageUrl:g}),console.log(`âœ… Y\xfcklendi: ${a.title}`)}async function g(e,t){try{await d(),t.status(200).json({success:!0})}catch(e){console.error("âŒ Hata:",e.message||e),t.status(500).json({success:!1,error:e.message||"Sunucu hatasÄ±"})}}r()}catch(e){r(e)}})},2537:e=>{e.exports=import("firebase/storage")},3480:(e,t,a)=>{e.exports=a(5600)},4337:e=>{e.exports=import("firebase/firestore")},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},6551:e=>{e.exports=import("firebase/app")},7984:e=>{e.exports=import("openai")},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return a}});var a=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})}};var t=require("../../webpack-api-runtime.js");t.C(e);var a=t(t.s=1592);module.exports=a})();